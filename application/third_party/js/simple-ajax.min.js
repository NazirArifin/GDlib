/* ===================================================================
 * simple-ajax.js v0.1.0
 * ===================================================================
 * Copyright (c) 2012, Nazir Arifin
 * All rights reserved.
 *
 * Inspired from bootstrap-ajax.js v0.1.0
 * Copyright (c) 2012, Eldarion, Inc.
 * =================================================================== */

!function($){'use strict';var Ajax=function(){}
Ajax.prototype.click=function(e){var $this=$(this),url=$this.attr('href'),method=$this.attr('data-method'),callb=$this.attr('data-callback');if(!method)method='get';e.preventDefault();$.ajax({url:url,type:method,statusCode:{200:function(data,status,xhr){var ct=xhr.getResponseHeader('content-type')||'';var type=ct.indexOf('json')>-1?'json':'html';processData(data,$this,type,callb);},500:function(data){processError($this);}}});}
Ajax.prototype.submit=function(e){var $this=$(this),url=$this.attr('action'),method=$this.attr('method'),data=$this.serialize(),callb=$this.attr('data-callback');if(!method)method='get';e.preventDefault();$.ajax({url:url,type:method,data:data,statusCode:{200:function(data,status,xhr){var ct=xhr.getResponseHeader('content-type')||'';var type=ct.indexOf('json')>-1?'json':'html';processData(data,$this,type,callb);},500:function(data){processError(data,$this);}}});}
function processData(data,$el,type,callback){var replace_selector=$el.attr('data-replace'),replace_closest_selector=$el.attr('data-replace-closest'),append_selector=$el.attr('data-append');if(replace_selector){$(replace_selector).html(type=='json'?data.html:data);}if(replace_closest_selector){$(replace_closest_selector).html(type=='json'?data.html:data);}if(append_selector){$(append_selector).append(type=='json'?data.html:data);}if(callback){eval(callback);}}function processError(data,$el){console.log(data);}function addEventAjax(){$('body').on('click','a.ajax',Ajax.prototype.click);$('body').on('submit','form.ajax',Ajax.prototype.submit);}$(function(){addEventAjax();});}(window.jQuery);